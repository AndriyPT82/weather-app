(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],[,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),i=n(5),r=n.n(i),s=(n(11),n(3)),o=n(2),d=function(e){return(e-273.15).toFixed()+"\xb0 C"},l=(n(12),n(0)),j=function(e){var t=e.cityName,n=e.dt,c=e.humidity,a=e.temp,i=e.weather,r=e.wind_speed,s=new Date(1e3*n);return Object(l.jsxs)("div",{className:"current-day",children:[Object(l.jsxs)("div",{className:"current-day__main-info card",children:[Object(l.jsx)("h2",{children:s.toLocaleDateString("en-US",{weekday:"long"})}),Object(l.jsxs)("div",{className:"current-day__icon ",children:[Object(l.jsx)("img",{src:"http://openweathermap.org/img/w/".concat(i[0].icon,".png"),alt:"weather"}),Object(l.jsx)("div",{className:"current-day__img-description",children:i[0].description})]}),Object(l.jsx)("div",{className:"current-day__temp",children:d(a.day)})]}),Object(l.jsx)("div",{className:"current-day__city-name",children:Object(l.jsx)("h1",{children:t})}),Object(l.jsxs)("div",{className:"current-day__details",children:[Object(l.jsxs)("span",{children:[Object(l.jsx)("span",{children:"Date:"})," ",Object(l.jsx)("span",{children:s.toLocaleDateString("uk-UA")})]}),Object(l.jsxs)("span",{children:[Object(l.jsx)("span",{children:"Wind Speed:"})," ",Object(l.jsxs)("span",{children:["".concat(r," m/s")," "]})]}),Object(l.jsxs)("span",{children:[Object(l.jsx)("span",{children:"Humidity:"})," ",Object(l.jsx)("span",{children:c})]})]})]})},u=n(6),h=n.n(u),b=(n(14),function(e){var t=e.index,n=e.dt,a=e.temp,i=e.weather,r=Object(c.useContext)(m),s=r.indexDay,o=r.setIndexDay,j=new Date(1e3*n);return Object(l.jsxs)("li",{className:h()("weekday","card",{"card--active":t===s}),onClick:function(){return o(t)},children:[Object(l.jsx)("h2",{className:"weekday__name",children:j.toLocaleDateString("en-US",{weekday:"long"})}),Object(l.jsx)("div",{className:"weekday__icon",children:Object(l.jsx)("img",{src:"http://openweathermap.org/img/w/".concat(i[0].icon,".png"),alt:"weather"})}),Object(l.jsx)("div",{className:"weekday__temp",children:d(a.day)})]})}),p=(n(15),function(e){var t=e.forecast;return Object(l.jsx)("ul",{className:"weekdays",children:t.map((function(e,t){return Object(l.jsx)(a.a.Fragment,{children:Object(l.jsx)(b,Object(s.a)({index:t},e))})}))})}),O=(n(16),function(e){var t=e.setCoords,n=Object(c.useState)(""),a=Object(o.a)(n,2),i=a[0],r=a[1],s=Object(c.useState)(""),d=Object(o.a)(s,2),j=d[0],u=d[1],h=Object(c.useState)([]),b=Object(o.a)(h,2),p=b[0],O=b[1],m=function(e){var n=e.currentTarget.value||0;t([p[n].latitude,p[n].longitude]),O([]),setTimeout((function(){r(""),u("")}),1e3)},f=Object(c.useCallback)(function(e,t){var n;return function(){clearTimeout(n);for(var c=arguments.length,a=new Array(c),i=0;i<c;i++)a[i]=arguments[i];n=setTimeout.apply(void 0,[e,t].concat(a))}}(u,500),[]);return Object(c.useEffect)((function(){j.length>2&&fetch("http://geodb-free-service.wirefreethought.com/v1/geo/cities?limit=10&offset=0&namePrefix=".concat(j,"&types=CITY&sort=-population"),{method:"GET",headers:{"x-rapidapi-host":"wft-geo-db.p.rapidapi.com","x-rapidapi-key":"4ea59f389bmsh3fb5fb34912cb31p1339cdjsn80468ba25b81","content-type":"application/json",data:{query:"{ cities }"}}}).then((function(e){return e.json()})).then((function(e){return O(e.data)})).catch((function(e){console.error(e)}))}),[j]),Object(l.jsxs)("div",{className:"input",children:[Object(l.jsxs)("div",{className:"input__controllers",children:[Object(l.jsx)("input",{type:"text",placeholder:"ex: Lviv",value:i,className:"input__field",onChange:function(e){var t=e.target.value;t.length<i.length&&O([]),r(t),f(t)}}),Object(l.jsx)("button",{className:"input__button",disabled:!p.length,onClick:m,children:"go!"})]}),!!p.length&&Object(l.jsx)("ul",{className:"input__options",children:p.map((function(e,t){var n=e.name,c=e.country;return Object(l.jsxs)("li",{value:t,className:"input__option",onClick:function(e){r(n),m(e)},children:[Object(l.jsxs)("span",{children:[" ",n]}),Object(l.jsx)("span",{children:c})]})}))})]})}),m=(n(17),a.a.createContext());var f=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)([]),r=Object(o.a)(i,2),d=r[0],u=r[1],h=Object(c.useState)(0),b=Object(o.a)(h,2),f=b[0],x=b[1];Object(c.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,n=t.latitude,c=t.longitude;a([n,c])}))}),[]);var v=function(e){var t=e.cityName,n=e.forecast,c=n.daily[0],a=n.daily.slice(0,7);c.cityName=t,u([c,a])};Object(c.useEffect)((function(){if(n.length){var e=Object(o.a)(n,2);(function(e){var t=Object(o.a)(e,2),n=t[0],c=t[1];return Promise.all([fetch("https://api.openweathermap.org/data/2.5/weather?lat=".concat(n,"&lon=").concat(c,"&appid=5cce314eb75f7136d6791029de739d4e")).then((function(e){return e.json()})).then((function(e){return e.name})),fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(n,"&lon=").concat(c,"&exclude=current,hourly,minutely&appid=5cce314eb75f7136d6791029de739d4e")).then((function(e){return e.json()}))]).then((function(e){return{cityName:e[0],forecast:e[1]}}))})([e[0],e[1]]).then(v)}}),[n]);var y=Object(o.a)(d,2),g=y[0],w=y[1];return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(O,{setCoords:a}),d.length?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(j,Object(s.a)({cityName:g.cityName},w[f])),Object(l.jsx)(m.Provider,{value:{setIndexDay:x,indexDay:f},children:Object(l.jsx)(p,{forecast:w})})]}):Object(l.jsx)("div",{className:"message",children:Object(l.jsx)("span",{children:"Allow geolocation to continue or choose city"})})]})};r.a.render(Object(l.jsx)(f,{}),document.getElementById("root"))}],[[18,1,2]]]);
//# sourceMappingURL=main.7be6e277.chunk.js.map